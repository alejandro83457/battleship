(()=>{"use strict";const t=class{#t;#e;constructor(t){this.#t=t,this.#e=0}hit(){this.#e++}isSunk(){return this.#e>=this.#t}get ship(){return{len:this.#t,hits:this.#e}}},e=class{#o;#r;constructor(){this.#o=Array(7);for(let t=0;t<this.#o.length;t++){this.#o[t]=Array(7);for(let e=0;e<this.#o.length;e++)this.#o[t][e]={hit:!1}}this.#r=[]}get board(){return this.#o}get ships(){return this.#r}placeShip(e,o){let[r,i]=e;if(r<0||r>6)return!1;if(i<0||i>6)return!1;if(i+o-1>6)return!1;for(let t=0;t<o;t++)if(this.#o[r][i+t].ship)return console.log("Unable to place ship. Spot already taken."),!1;let l=new t(o);for(let t=0;t<o;t++)this.#o[r][i+t].ship=l;return this.#r.push(l),!0}receiveAttack(t){let[e,o]=t;return this.#o[e][o].ship?!this.#o[e][o].hit&&(this.#o[e][o].ship.hit(),this.#o[e][o].hit=!0,this.hasBeenSunk(t)&&this.#r.pop(),!0):(this.#o[e][o].hit=!0,!1)}hasBeenAttacked(t){let[e,o]=t;return this.#o[e][o].hit}hasBeenSunk(t){let[e,o]=t;return this.#o[e][o].ship.isSunk()}allShipsSunk(){return 0==this.#r.length}printBoard(){this.#o.forEach((t=>console.log(t))),console.log(" ")}};function o(t){for(let e=0;e<t.length;e++)for(let o=0;o<t.length;o++){let r=document.querySelector(`#a${e}${o}`);!t[e][o].ship&&t[e][o].hit&&(r.style.backgroundColor="lightgray"),t[e][o].ship&&!t[e][o].hit&&(r.style.backgroundColor="gray"),t[e][o].ship&&t[e][o].hit&&(r.style.backgroundColor="darkred"),t[e][o].ship&&t[e][o].ship.isSunk()&&(r.style.backgroundColor="red")}}const r=class{#i;constructor(){this.#i=Array(7);for(let t=0;t<this.#i.length;t++)this.#i[t]=Array(7).fill(!1)}getMove(){for(;;){let t=Math.floor(7*Math.random()),e=Math.floor(7*Math.random());if(!this.#i[t][e])return this.#i[t][e]=!1,[t,e]}}};let i,l,s,h=new r;function n(t){let e=t.target.getAttribute("id").split("");e.shift();let r=e.map((t=>parseInt(t)));i.placeShip(r,s[0])&&(console.log(s.length),1==s.length&&(console.log("lens is 1!"),document.querySelectorAll(".col2").forEach((t=>{t.addEventListener("click",c)}))),o(i.board),s.shift())}function c(t){let e=t.target.getAttribute("id").split("");e.shift();let r=e.map((t=>parseInt(t)));l.board[r[0]][r[1]].hit||(l.receiveAttack(r),function(t){for(let e=0;e<t.length;e++)for(let o=0;o<t.length;o++){let r=document.querySelector(`#b${e}${o}`);!t[e][o].ship&&t[e][o].hit&&(r.style.backgroundColor="lightgray"),t[e][o].ship&&t[e][o].hit&&(r.style.backgroundColor="darkred"),t[e][o].ship&&t[e][o].ship.isSunk()&&(r.style.backgroundColor="red")}}(l.board),l.allShipsSunk()&&a("human"),function(){let t=h.getMove();for(;i.board[t[0]][t[1]].hit;)t=h.getMove();i.receiveAttack(t),o(i.board),i.allShipsSunk()&&a("bot")}())}function a(t){document.querySelector("#content").textContent=`${t} is the winner!`,function(){let t=document.querySelectorAll(".col1");t.forEach((t=>{t.style.backgroundColor="white"})),t=document.querySelectorAll(".col2"),t.forEach((t=>{t.style.backgroundColor="white"}))}(),function(){let t=document.querySelectorAll(".col1");t.forEach((t=>{t.removeEventListener("click",n)})),t=document.querySelectorAll(".col2"),t.forEach((t=>{t.removeEventListener("click",c)}))}(),u()}function u(){i=new e,l=new e,s=[2,3,3,4,5],function(){let t=new r;for(;!l.placeShip(t.getMove(),2););for(;!l.placeShip(t.getMove(),3););for(;!l.placeShip(t.getMove(),3););for(;!l.placeShip(t.getMove(),4););for(;!l.placeShip(t.getMove(),5););}(),document.querySelectorAll(".col1").forEach((t=>{t.addEventListener("click",n)}))}u()})();