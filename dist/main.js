(()=>{"use strict";const t=class{#t;#e;constructor(t){this.#t=t,this.#e=0}hit(){this.#e++}isSunk(){return this.#e>=this.#t}get ship(){return{len:this.#t,hits:this.#e}}},e=class{#i;#r;constructor(){this.#i=Array(7);for(let t=0;t<this.#i.length;t++){this.#i[t]=Array(7);for(let e=0;e<this.#i.length;e++)this.#i[t][e]={hit:!1}}this.#r=[]}get board(){return this.#i}placeShip(e,i){let[r,s]=e;if(r<0||r>6)return!1;if(s<0||s>6)return!1;if(s+i-1>6)return!1;for(let t=0;t<i;t++)if(this.#i[r][s+t].ship)return console.log("Unable to place ship. Spot already taken."),!1;let h=new t(i);for(let t=0;t<i;t++)this.#i[r][s+t].ship=h;return this.#r.push(h),!0}receiveAttack(t){let[e,i]=t;return this.#i[e][i].ship?!this.#i[e][i].hit&&(this.#i[e][i].ship.hit(),this.#i[e][i].hit=!0,this.hasBeenSunk(t)&&this.#r.pop(),!0):(this.#i[e][i].hit=!0,!1)}hasBeenAttacked(t){let[e,i]=t;return this.#i[e][i].hit}hasBeenSunk(t){let[e,i]=t;return this.#i[e][i].ship.isSunk()}allShipsSunk(){return 0==this.#r.length}printBoard(){this.#i.forEach((t=>console.log(t))),console.log(" ")}printShips(){this.#r.forEach((t=>console.log(t.ship)))}},i=class{#s;constructor(){this.#s=Array(7);for(let t=0;t<this.#s.length;t++)this.#s[t]=Array(7).fill(!1)}getMove(){for(;;){let t=Math.floor(7*Math.random()),e=Math.floor(7*Math.random());if(!this.#s[t][e])return this.#s[t][e]=!1,[t,e]}}};!function(){let t=new e;!function(t){let e=new i;for(;!t.placeShip(e.getMove(),2););for(;!t.placeShip(e.getMove(),3););for(;!t.placeShip(e.getMove(),3););for(;!t.placeShip(e.getMove(),4););for(;!t.placeShip(e.getMove(),5););}(new e),t.placeShip([0,5],2),t.placeShip([1,3],3),t.placeShip([4,0],3),t.placeShip([6,3],4),t.placeShip([3,1],5),t.receiveAttack([0,5]),t.receiveAttack([0,6]),t.receiveAttack([6,3]),function(t){for(let e=0;e<t.length;e++)for(let i=0;i<t.length;i++){if(!t[e][i].ship)continue;let r=document.querySelector(`#a${e}${i}`);t[e][i].hit||(r.style.backgroundColor="gray"),t[e][i].hit&&(r.style.backgroundColor="darkred"),t[e][i].ship.isSunk()&&(r.style.backgroundColor="red")}}(t.board)}()})();